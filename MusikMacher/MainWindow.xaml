<Window x:Class="MusikMacher.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:local="clr-namespace:MusikMacher"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800">
  <Window.Resources>
    <local:SecondsToTimeStringConverter x:Key="SecondsToTimeStringConverter"/>
  </Window.Resources>
  <Window.InputBindings>
    <KeyBinding Key="Space" Command="{Binding SpaceKeyPressedCommand}" />
  </Window.InputBindings>
  <Grid>
    <TabControl HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
      <TabItem Header="Browse">
        <Grid Background="#FFE5E5E5">
          <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>

          <ListBox 
            x:Name="listBox" 
            Grid.Row="0" ItemsSource="{Binding Tracks}" SelectedItem="{Binding Path=Player.currentTrack}"
            PreviewMouseLeftButtonDown="ListBox_PreviewMouseLeftButtonDown"
            PreviewMouseMove="ListBox_PreviewMouseMove">
            <ListBox.InputBindings>
              <KeyBinding Key="Space" Command="{Binding SpaceKeyPressedCommand}" />
            </ListBox.InputBindings>
            <ListBox.ItemTemplate>
              <DataTemplate>
                <TextBlock Text="{Binding name}" Margin="5"/>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>

          <StackPanel Grid.Row="1">
            <Label Content="{Binding Path=Player.currentTrack.name}"/>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <Label Grid.Column="0" Content="{Binding  Path=Player.Position, Converter={StaticResource SecondsToTimeStringConverter}}"/>
              <Slider Grid.Column="1" HorizontalAlignment="Stretch" Maximum="{Binding Path=Player.Length}" Value="{Binding Path=Player.Position}"/>
              <Label Grid.Column="2" Content="{Binding  Path=Player.Length, Converter={StaticResource SecondsToTimeStringConverter}}"/>
            </Grid>
            <StackPanel Orientation="Horizontal">
              <Button Content="Play" Command="{Binding Path=Player.PlayCommand}" IsEnabled="{Binding !IsPlaying}"/>
              <Button Content="Pause" Command="{Binding Path=Player.PauseCommand}" IsEnabled="{Binding IsPlaying}"/>
              <Button Content="Stop" Command="{Binding Path=Player.StopCommand}"/>
            </StackPanel>
          </StackPanel>
        </Grid>
      </TabItem>
      <TabItem Header="Settings">
        <Grid Background="#FFE5E5E5">
          <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
          </Grid.RowDefinitions>
          <Label  Grid.Row="0">
            Path to search
          </Label>
          <TextBox Grid.Row="1" Text="{Binding Path=dataLocation}"></TextBox>
          <Button Grid.Row="2" Content="Load Data" Command="{Binding LoadDataCommand}"/>
          <TextBlock Grid.Row="3" Text="{Binding Path=loadingLog}"/>
        </Grid>
      </TabItem>
    </TabControl>

  </Grid>
</Window>

